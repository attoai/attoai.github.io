<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>202506 1 单选题</title>
  <link href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism.css" rel="stylesheet"/>
  <!-- 数学公式支持 -->
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    .description { background: #f9f9f9; border: 1px solid #ddd; padding: 10px; margin-bottom: 20px; border-radius: 5px; overflow-x: auto; }
    .question { margin-bottom: 20px; }
    button { margin-top: 10px; padding: 8px 12px; }
    .correct { color: green; font-weight: bold; }
    .wrong { color: red; font-weight: bold; }

    /* 进度条样式 */
    .progress-container {
      width: 100%;
      background-color: #f3f3f3;
      border-radius: 20px;
      margin-top: 15px;
      height: 25px;
      box-shadow: inset 0 1px 3px rgba(0,0,0,0.2);
    }
    .progress-bar {
      height: 100%;
      border-radius: 20px;
      text-align: center;
      line-height: 25px;
      color: white;
      font-weight: bold;
      width: 0%;
      transition: width 1s ease-in-out;
    }

    /* 倒计时 */
    #timer {
      font-size: 18px;
      font-weight: bold;
      margin-bottom: 20px;
      color: darkblue;
      position: fixed;
      top: 10px;
      right: 10px;
      z-index: 1000;
      background-color: white;
      padding: 10px;
      border-radius: 5px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }
  </style>
</head>
<body>
  <h1>1 单选题（每题 2 分，共 30 分）</h1>

  <!-- 倒计时显示 -->
  <div id="timer">剩余时间：15:00</div>

  <!-- 题目区域 -->
  <div id="quiz"></div>
  <button onclick="submitQuiz()">提交答案</button>

  <h2 id="result"></h2>
  <div class="progress-container">
    <div id="progress-bar" class="progress-bar">0%</div>
  </div>

  <!-- Prism 高亮库 -->
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/prism.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-javascript.min.js"></script>

  <script>
    // ===========================
    // 题目数据，支持代码 + 数学公式
    // ===========================
    const questions = [
      {
        text: "1 32 位 int 类型的存储范围是（ ）。",
        options: [
          { text: "A. -2147483647 ~ +2147483647", code: "" },
          { text: "B. -2147483647 ~ +2147483648", code: "" },
          { text: "C. -2147483648 ~ +2147483647", code: "" },
          { text: "D. -2147483648 ~ +2147483648", code: "" }
        ],
        answer: [2],
        rule: "all",
        score: 2,
        code: `` // 无代码
      },
      {
        text: "2 计算表达式   (14<sub>8</sub>-1010<sub>2</sub>)*D<sub>16</sub> -1101<sub>2</sub>的结果，并选择答案的十进制值：（ ）。",
        options: [
          { text: "A. 13", code: "" },
          { text: "B. 14", code: "" },
          { text: "C. 15", code: "" },
          { text: "D. 16", code: "" }
        ],
        answer: [0],
        rule: "all",
        score: 2,
        code: ``
      },
      {
        text: "3 某公司有 10 名员工，分为 3 个部门：A 部门有 4 名员工，B 部门有 3 名员工，C 部门有 3 名员工。现需要从这 10 名员工中选出 4 名组成一个工作组 ，且每个部门至少要有 1 人。问有多少种选择方式？（ ）",
        options: [
          { text: "A. 120", code: "" },
          { text: "B. 126", code: "" },
          { text: "C. 132", code: "" },
          { text: "D. 238", code: ""}
        ],
        answer: [1],
        rule: "all",
        score: 2,
        code: ``
      },
      {
        text: "4 以下哪个序列对应数组 0 至 8 的 4 位二进制格雷码(Gray code)?",
        options: [
          { text: "A. 0000 0001 0011 0010 0110 0111 0101 1000", code: "" },
          { text: "B. 0000 0001 0011 0010 0110 0111 0100 0101", code: "" },
          { text: "C. 0000 0001 0011 0010 0100 0101 0111 0110", code: "" },
          { text: "D. 0000 0001 0011 0010 0110 0111 0101 0100", code: ""}
        ],
        answer: [3],
        rule: "all",
        score: 2,
        code: ``
      },
      {
        text: "5 记 1KB 为 1024 字节(byte)，1MB 为 1024KB，那么 1MB 是多少二进制位(bit)？",
        options: [
          { text: "A. 1000000", code: "" },
          { text: "B. 1048576", code: "" },
          { text: "C. 8000000", code: "" },
          { text: "D. 8388608", code: ""}
        ],
        answer: [3],
        rule: "all",
        score: 2,
        code: ``
      },
      {
        text: "6 以下哪个不是 C++中的基本数据类型？",
        options: [
          { text: "A. int", code: "" },
          { text: "B. float", code: "" },
          { text: "C. struct", code: "" },
          { text: "D. char", code: ""}
        ],
        answer: [2],
        rule: "all",
        score: 2,
        code: ``
      },
      {
        text: "7 以下哪个不是 C++中的循环语句？",
        options: [
          { text: "A. for", code: "" },
          { text: "B. while", code: "" },
          { text: "C. do-while", code: "" },
          { text: "D. repeat-until", code: ""}
        ],
        answer: [3],
        rule: "all",
        score: 2,
        code: ``
      },
      {
        text: "8 在 C/C++中，(char)('a'+13)与下面的哪一个值相等（ ）",
        options: [
          { text: "A. 'm'", code: "" },
          { text: "B. 'n'", code: "" },
          { text: "C. 'z'", code: "" },
          { text: "D. '3'", code: ""}
        ],
        answer: [1],
        rule: "all",
        score: 2,
        code: ``
      },
      {
        text: "9 假设有序表中有 1000 个元素，则用二分法查找元素 x 最多需要比较（ ）次",
        options: [
          { text: "A. 25", code: "" },
          { text: "B. 10", code: "" },
          { text: "C. 7", code: "" },
          { text: "D. 1", code: ""}
        ],
        answer: [1],
        rule: "all",
        score: 2,
        code: ``
      },
      {
        text: "10 下面哪一个不是操作系统名字（ ）",
        options: [
          { text: "A. Notepad", code: "" },
          { text: "B. Linux", code: "" },
          { text: "C. Windows", code: "" },
          { text: "D. macOS", code: ""}
        ],
        answer: [0],
        rule: "all",
        score: 2,
        code: ``
      },
      {
        text: "11 在无向图中，所有顶点的度数之和等于（ ）",
        options: [
          { text: "A. 图的边数", code: "" },
          { text: "B. 图的边数的两倍", code: "" },
          { text: "C. 图的定点数", code: "" },
          { text: "D. 图的定点数的两倍", code: ""}
        ],
        answer: [1],
        rule: "all",
        score: 2,
        code: ``
      },
      {
        text: "12 已知二叉树的前序遍历为[A,B,D,E,C,F,G],中序遍历为[D,B,E,A,F,C,G],求二叉树的后序遍历的结果是（ ）",
        options: [
          { text: "A. [D,E,B,F,G,C,A]", code: "" },
          { text: "B. [D,E,B,F,G,A,C]", code: "" },
          { text: "C. [D,B,E,F,G,C,A]", code: "" },
          { text: "D. [D,E,B,F,G,A,C]", code: ""}
        ],
        answer: [0],
        rule: "all",
        score: 2,
        code: ``
      },
      {
        text: "13 给定一个空栈，支持入栈和出栈操作。若入栈操作的元素依次是 1 2 3 4 5 6,其中 1 最先入栈，6 最后入栈，下面哪种出栈顺序是不可能的（ ）",
        options: [
          { text: "A. 6 5 4 3 2 1", code: "" },
          { text: "B. 1 6 5 4 3 2", code: "" },
          { text: "C. 2 4 6 5 3 1", code: "" },
          { text: "D. 1 3 5 2 4 6", code: ""}
        ],
        answer: [3],
        rule: "all",
        score: 2,
        code: ``
      },
      {
        text: "14. 有 5 个男生和 3 个女生站成一排，规定 3 个女生必须相邻，问有多少种不同的排列方式？",
        options: [
          { text: "A. 4320 种", code: "" },
          { text: "B. 5040 种", code: "" },
          { text: "C. 3600 种", code: "" },
          { text: "D. 2880 种", code: ""}
        ],
        answer: [0],
        rule: "all",
        score: 2,
        code: ``
      },
      {
        text: "15. 编译器的主要作用是什么（ ）？",
        options: [
          { text: "A. 直接执行源代码", code: "" },
          { text: "B. 将源代码转换为机器代码", code: "" },
          { text: "C. 进行代码调试", code: "" },
          { text: "D. 管理程序运行时的内存", code: ""}
        ],
        answer: [1],
        rule: "all",
        score: 2,
        code: ``
      }

    ];

    // 渲染题目
    const quizDiv = document.getElementById("quiz");
    questions.forEach((q, i) => {
      const div = document.createElement("div");
      div.className = "question";
      const isMulti = q.answer.length > 1 || q.rule === "any";

      // 构造 HTML
      div.innerHTML = `
        <p id="q${i}-text">${q.text} <small>（${q.score}分）</small></p>
        ${q.code ? `<pre><code class="language-cpp">${q.code}</code></pre>` : ""}
        ${q.options.map((opt, j) => `
          <label>
            <input type="${isMulti ? "checkbox" : "radio"}" name="q${i}" value="${j}">
            ${opt.text}
            ${opt.code ? `<pre><code class="language-cpp">${opt.code}</code></pre>` : ""}
          </label><br>
        `).join("")}
        <p class="feedback" id="feedback${i}"></p>
      `;
      quizDiv.appendChild(div);
    });

    // 数学公式渲染
    if (window.MathJax) MathJax.typeset();

    // 提交判分
    function submitQuiz(auto=false) {
      let totalScore = 0;
      let maxScore = questions.reduce((sum, q) => sum + q.score, 0);

      questions.forEach((q, i) => {
        const selected = Array.from(document.querySelectorAll(`input[name="q${i}"]:checked`)).map(el => parseInt(el.value));
        let isCorrect = false;

        if (q.rule === "all") {
          isCorrect = selected.length === q.answer.length && selected.every(v => q.answer.includes(v));
        } else if (q.rule === "any") {
          const hasCorrect = selected.some(v => q.answer.includes(v));
          const hasWrong = selected.some(v => !q.answer.includes(v));
          isCorrect = hasCorrect && !hasWrong;
        }

        if (isCorrect) totalScore += q.score;
        const correctText = q.answer.map(idx => q.options[idx].text).join("，");

        document.getElementById(`feedback${i}`).innerHTML = isCorrect
          ? `<span class='correct'>✔ 正确 (${q.score}分)</span> 正确答案：${correctText}`
          : `<span class='wrong'>✘ 错误 (0分)</span> 正确答案：${correctText}`;
      });

      const percent = Math.round((totalScore / maxScore) * 100);
      const bar = document.getElementById("progress-bar");
      bar.style.width = percent + "%";
      bar.innerText = percent + "%";
      bar.style.backgroundColor = percent < 50 ? "red" : (percent < 80 ? "orange" : "green");

      document.getElementById("result").innerText = 
        (auto ? "⏰ 时间到，已自动提交！ " : "") + `总分：${totalScore}/${maxScore}`;

      clearInterval(timerInterval);
    }

    // 倒计时逻辑
    let timeLeft = 900; // 15 分钟
    const timerDiv = document.getElementById("timer");
    function formatTime(s) {
      const m = String(Math.floor(s / 60)).padStart(2, "0");
      const sec = String(s % 60).padStart(2, "0");
      return `${m}:${sec}`;
    }

    const timerInterval = setInterval(() => {
      timeLeft--;
      timerDiv.innerText = `剩余时间：${formatTime(timeLeft)}`;
      if (timeLeft <= 0) {
        clearInterval(timerInterval);
        submitQuiz(true);
      }
    }, 1000);

    timerDiv.innerText = `剩余时间：${formatTime(timeLeft)}`;
  </script>
</body>
</html>
